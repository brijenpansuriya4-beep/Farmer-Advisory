<!DOCTYPE html>
<html lang="ml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Krishi Officer - ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥ì‡¥´‡µÄ‡¥∏‡µº</title>
    <style>
        :root {
            --primary-color: #2e7d32; /* Rich green representing Kerala's vegetation */
            --secondary-color: #8d6e63; /* Earthy brown representing soil */
            --accent-color: #ffa000; /* Golden yellow for highlights */
            --light-green: #e8f5e9; /* Very light green for backgrounds */
            --dark-green: #1b5e20; /* Dark green for contrasts */
            --text-color: #333;
            --light-text: #666;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans Malayalam', 'Noto Sans', 'Roboto', sans-serif;
        }
        
        body {
            background-color: var(--light-green);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(to right, var(--primary-color), var(--dark-green));
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(46, 125, 50, 0.3);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 1.8rem;
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--accent-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .language-selector {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .language-selector:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .language-selector option {
            color: black;
        }
        
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            padding: 100px 0;
            text-align: center;
            color: white;
            position: relative;
            margin-bottom: 40px;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .hero h2 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        
        .hero p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto 30px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }
        
        .query-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(46, 125, 50, 0.2);
            margin-top: -50px;
            position: relative;
            z-index: 10;
            border-top: 4px solid var(--accent-color);
        }
        
        .query-tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .tab:hover {
            background-color: #f5f5f5;
        }
        
        .input-container {
            margin-bottom: 20px;
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            min-height: 120px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }
        
        .voice-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .voice-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .voice-btn:hover {
            background: var(--dark-green);
            transform: scale(1.05);
        }
        
        .voice-status {
            font-size: 0.9rem;
            color: var(--light-text);
        }
        
        .image-upload {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .image-upload:hover {
            border-color: var(--primary-color);
            background-color: #f9f9f9;
        }
        
        .upload-icon {
            font-size: 2rem;
            color: var(--light-text);
            margin-bottom: 10px;
        }
        
        .context-fields {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .context-fields select, .context-fields input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            transition: border 0.3s;
        }
        
        .context-fields select:focus, .context-fields input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }
        
        .submit-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0 auto;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .submit-btn:hover {
            background: var(--dark-green);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .response-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(46, 125, 50, 0.2);
            margin-top: 30px;
            display: none;
            border-left: 4px solid var(--accent-color);
        }
        
        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .response-content {
            line-height: 1.8;
        }
        
        .escalate-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .escalate-btn:hover {
            background: #6d4c41;
        }
        
        .features {
            padding: 60px 0;
            background: white;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary-color);
            position: relative;
            padding-bottom: 15px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background-color: var(--accent-color);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .feature-card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            border-top: 3px solid var(--primary-color);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        footer {
            background: linear-gradient(to right, var(--primary-color), var(--dark-green));
            color: white;
            padding: 40px 0 20px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-section h3 {
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: var(--accent-color);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.2);
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .context-fields {
                grid-template-columns: 1fr;
            }
        }
        
        /* Loading animation */
        .loader {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .loader-dots {
            display: inline-block;
            position: relative;
            width: 80px;
            height: 20px;
        }
        
        .loader-dots div {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary-color);
            animation-timing-function: cubic-bezier(0, 1, 1, 0);
        }
        
        .loader-dots div:nth-child(1) {
            left: 8px;
            animation: loader-dots1 0.6s infinite;
        }
        
        .loader-dots div:nth-child(2) {
            left: 8px;
            animation: loader-dots2 0.6s infinite;
        }
        
        .loader-dots div:nth-child(3) {
            left: 32px;
            animation: loader-dots2 0.6s infinite;
        }
        
        .loader-dots div:nth-child(4) {
            left: 56px;
            animation: loader-dots3 0.6s infinite;
        }
        
        @keyframes loader-dots1 {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }
        
        @keyframes loader-dots3 {
            0% { transform: scale(1); }
            100% { transform: scale(0); }
        }
        
        @keyframes loader-dots2 {
            0% { transform: translate(0, 0); }
            100% { transform: translate(24px, 0); }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Malayalam:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- The rest of your HTML content remains exactly the same -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <span class="logo-icon">üå±</span>
                <h1 data-lang="ml">Digital Krishi Officer</h1>
                <h1 data-lang="en" style="display: none;">Digital Krishi Officer</h1>
                <h1 data-lang="hi" style="display: none;">‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡•É‡§∑‡§ø ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä</h1>
            </div>
            <nav>
    <ul>
        <li><a href="#" data-lang="ml">‡¥Æ‡µÅ‡¥ñ‡µç‡¥Ø‡¥™‡µá‡¥ú‡µç</a><a href="#" data-lang="en" style="display: none;">Home</a><a href="#" data-lang="hi" style="display: none;">‡§Æ‡•Å‡§ñ‡§™‡•É‡§∑‡•ç‡§†</a></li>
        <li><a href="advisories.html" data-lang="ml">‡¥â‡¥™‡¥¶‡µá‡¥∂‡¥ô‡µç‡¥ô‡µæ</a><a href="advisories.html" data-lang="en" style="display: none;">Advisories</a><a href="advisories.html" data-lang="hi" style="display: none;">‡§∏‡§≤‡§æ‡§π</a></li>
        <li><a href="crop-calendar.html" data-lang="ml">‡¥ï‡µÉ‡¥∑‡¥ø ‡¥ï‡¥≤‡¥£‡µç‡¥ü‡µº</a><a href="crop-calendar.html" data-lang="en" style="display: none;">Crop Calendar</a><a href="crop-calendar.html" data-lang="hi" style="display: none;">‡§´‡§∏‡§≤ ‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞</a></li>
        <li><a href="schemes.html" data-lang="ml">‡¥™‡¥¶‡µç‡¥ß‡¥§‡¥ø‡¥ï‡µæ</a><a href="schemes.html" data-lang="en" style="display: none;">Schemes</a><a href="schemes.html" data-lang="hi" style="display: none;">‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</a></li>
        <li><a href="market-price.html" data-lang="ml">‡¥µ‡¥ø‡¥™‡¥£‡¥ø ‡¥µ‡¥ø‡¥≤</a><a href="market-price.html" data-lang="en" style="display: none;">Market Prices</a><a href="market-price.html" data-lang="hi" style="display: none;">‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø</a></li>
        <li><a href="contact.html" data-lang="ml">‡¥¨‡¥®‡µç‡¥ß‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥ï</a><a href="contact.html" data-lang="en" style="display: none;">Contact</a><a href="contact.html" data-lang="hi" style="display: none;">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</a></li>
    </ul>
</nav>
            
        <select class="language-selector" id="language-selector"> <option value="ml" selected>‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option> <option value="en">English</option> <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option> </select>


        </div>
    </header>

    <section class="hero">
        <div class="container hero-content">
            <h2 data-lang="ml">‡¥µ‡¥ø‡¥¶‡¥ó‡µç‡¥ß ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥â‡¥™‡¥¶‡µá‡¥∂‡¥Ç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡¥ø‡¥∞‡¥≤‡µÅ‡¥ï‡¥≥‡¥ø‡µΩ</h2>
            <h2 data-lang="en" style="display: none;">Expert Farming Advice at Your Fingertips</h2>
            <h2 data-lang="hi" style="display: none;">‡§Ü‡§™‡§ï‡•Ä ‡§â‡§Ç‡§ó‡§≤‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§ï‡•É‡§∑‡§ø ‡§∏‡§≤‡§æ‡§π</h2>
            
            <p data-lang="ml">‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥∏‡¥Ç‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥ö‡µç‡¥ö ‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥â‡¥ü‡¥®‡µÜ ‡¥â‡¥§‡µç‡¥§‡¥∞‡¥Ç ‡¥≤‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç</p>
            <p data-lang="en" style="display: none;">Get immediate answers to all your farming questions in your preferred language</p>
            <p data-lang="hi" style="display: none;">‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡•á ‡§∏‡§≠‡•Ä ‡§ï‡•É‡§∑‡§ø ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•á ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</p>
        </div>
    </section>

    <div class="container">
        <div class="query-container">
            <div class="query-tabs">
                <div class="tab active" data-tab="text" data-lang="ml">‡¥é‡¥¥‡µÅ‡¥§‡µç‡¥§‡µç ‡¥µ‡¥¥‡¥ø</div>
                <div class="tab active" data-tab="text" data-lang="en" style="display: none;">Text Input</div>
                <div class="tab active" data-tab="text" data-lang="hi" style="display: none;">‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§á‡§®‡§™‡•Å‡§ü</div>
                
                <div class="tab" data-tab="voice" data-lang="ml">‡¥∂‡¥¨‡µç‡¥¶‡¥Ç ‡¥µ‡¥¥‡¥ø</div>
                <div class="tab" data-tab="voice" data-lang="en" style="display: none;">Voice Input</div>
                <div class="tab" data-tab="voice" data-lang="hi" style="display: none;">‡§µ‡•â‡§á‡§∏ ‡§á‡§®‡§™‡•Å‡§ü</div>
                
                <div class="tab" data-tab="image" data-lang="ml">‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥µ‡¥¥‡¥ø</div>
                <div class="tab" data-tab="image" data-lang="en" style="display: none;">Image Input</div>
                <div class="tab" data-tab="image" data-lang="hi" style="display: none;">‡§á‡§Æ‡•á‡§ú ‡§á‡§®‡§™‡•Å‡§ü</div>
            </div>

            <div class="input-container" id="text-input">
                <textarea placeholder="‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥∏‡¥Ç‡¥¨‡¥®‡µç‡¥ß‡¥Æ‡¥æ‡¥Ø ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç ‡¥á‡¥µ‡¥ø‡¥ü‡µÜ ‡¥é‡¥¥‡µÅ‡¥§‡µÅ‡¥ï... ‡¥â‡¥¶‡¥æ: ‡¥é‡¥®‡µç‡¥±‡µÜ ‡¥µ‡¥æ‡¥¥‡¥§‡µç‡¥§‡¥ø‡¥≤‡µÜ ‡¥á‡¥≤‡¥™‡µç‡¥™‡µÅ‡¥≥‡µç‡¥≥‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥é‡¥®‡µç‡¥§‡µç ‡¥Æ‡¥∞‡µÅ‡¥®‡µç‡¥®‡µç ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡¥£‡¥Ç?" data-lang="ml"></textarea>
                <textarea placeholder="Type your farming-related question here... Ex: Which pesticide should I use for leaf spot in my banana plants?" data-lang="en" style="display: none;"></textarea>
                <textarea placeholder="‡§Ö‡§™‡§®‡§æ ‡§ï‡•É‡§∑‡§ø ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Ø‡§π‡§æ‡§Å ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç... ‡§â‡§¶‡§æ: ‡§Æ‡•á‡§∞‡•á ‡§ï‡•á‡§≤‡•á ‡§ï‡•á ‡§™‡•å‡§ß‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡§§‡•ç‡§§‡•Ä ‡§ï‡•á ‡§ß‡§¨‡•ç‡§¨‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•Å‡§ù‡•á ‡§ï‡•å‡§® ‡§∏‡§æ ‡§ï‡•Ä‡§ü‡§®‡§æ‡§∂‡§ï ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è?" data-lang="hi" style="display: none;"></textarea>
                
                <div class="voice-input">
                    <button class="voice-btn" id="voice-to-text">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <span class="voice-status" id="voice-status" data-lang="ml">‡¥Æ‡µà‡¥ï‡µç‡¥ï‡µç ‡¥ï‡µç‡¥≤‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µç ‡¥∂‡¥¨‡µç‡¥¶‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Ç</span>
                    <span class="voice-status" id="voice-status" data-lang="en" style="display: none;">Click mic to ask question by voice</span>
                    <span class="voice-status" id="voice-status" data-lang="hi" style="display: none;">‡§Ü‡§µ‡§æ‡§ú ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç</span>
                </div>
            </div>

            <div class="input-container" id="image-input" style="display: none;">
                <div class="image-upload" id="image-upload-area">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <p data-lang="ml">‡¥∞‡µã‡¥ó‡¥Ç ‡¥¨‡¥æ‡¥ß‡¥ø‡¥ö‡µç‡¥ö ‡¥ö‡µÜ‡¥ü‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï</p>
                    <p data-lang="en" style="display: none;">Upload photo of diseased crop</p>
                    <p data-lang="hi" style="display: none;">‡§∞‡•ã‡§ó‡§ó‡•ç‡§∞‡§∏‡•ç‡§§ ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</p>
                    <input type="file" accept="image/*" style="display: none;" id="image-file">
                </div>
                
                <textarea placeholder="‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥§‡µç‡¥§‡µÜ‡¥ï‡µç‡¥ï‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥Ö‡¥ß‡¥ø‡¥ï ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡µæ (‡¥ì‡¥™‡µç‡¥∑‡¥£‡µΩ)..." id="image-caption" data-lang="ml"></textarea>
                <textarea placeholder="Additional details about the image (optional)..." id="image-caption" data-lang="en" style="display: none;"></textarea>
                <textarea placeholder="‡§õ‡§µ‡§ø ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)..." id="image-caption" data-lang="hi" style="display: none;"></textarea>
            </div>

            <div class="context-fields">
                <div>
                    <label for="crop-type" data-lang="ml">‡¥™‡¥Ø‡µº‡¥µ‡µº‡¥ó‡µç‡¥ó‡¥Ç</label>
                    <label for="crop-type" data-lang="en" style="display: none;">Crop Type</label>
                    <label for="crop-type" data-lang="hi" style="display: none;">‡§´‡§∏‡§≤ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</label>
                    
                    <select id="crop-type">
                        <option value="" selected>Select</option>
                        <option value="paddy(rice)">Rice</option>
                        <option value="coconut">Coconut</option>
                        <option value="banana">Banana</option>
                        <option value="rubber">Rubber</option>
                        <option value="spices">Spices</option>
                    </select>
                </div>
                <div>
                    <label for="district" data-lang="ml">‡¥ú‡¥ø‡¥≤‡µç‡¥≤</label>
                    <label for="district" data-lang="en" style="display: none;">District</label>
                    <label for="district" data-lang="hi" style="display: none;">‡§ú‡§ø‡§≤‡§æ</label>
                    
                    <select id="district">
                        <option value="" selected>Select</option>
                        <option value="thiruvananthapuram">Thiruvananthapuram</option>
                        <option value="kollam">Kollam</option>
                        <option value="alappuzha">Alappuzha</option>
                        <option value="pathanamthitta">Pathanamthitta</option>
                        <option value="kottayam">Kottayam</option>
                        <option value="idukki">Idukki</option>
                        <option value="ernakulam">Ernakulam</option>
                        <option value="thrissur">Thrissur</option>
                        <option value="palakkad">Palakkad</option>
                        <option value="malappuram">Malappuram</option>
                        <option value="kozhikode">Kozhikode</option>
                        <option value="wayanad">Wayanad</option>
                        <option value="kannur">Kannur</option>
                        <option value="kasargod">Kasargod</option>
                    </select>
                </div>
                <div>
                    <label for="season" data-lang="ml">‡¥∏‡µÄ‡¥∏‡µª</label>
                    <label for="season" data-lang="en" style="display: none;">Season</label>
                    <label for="season" data-lang="hi" style="display: none;">‡§Æ‡•å‡§∏‡§Æ</label>
                    
                    <select id="season">
                        <option value="" selected>Select</option>
                        <option value="virippu">Virippu (April-May to September-October)</option>
                        <option value="mundakan">Mundakan (September-October to December-January)</option>
                        <option value="puncha">puncha (October-November to February-March)</option>
                    </select>
                </div>
            </div>

            <button class="submit-btn" id="submit-query">
                <i class="fas fa-paper-plane"></i>
                <span data-lang="ml">‡¥â‡¥§‡µç‡¥§‡¥∞‡¥Ç ‡¥≤‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï</span>
                <span data-lang="en" style="display: none;">Get Answer</span>
                <span data-lang="hi" style="display: none;">‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</span>
            </button>

            <div class="loader" id="loader">
                <div class="loader-dots">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <p data-lang="ml">‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ...</p>
                <p data-lang="en" style="display: none;">Analyzing your question...</p>
                <p data-lang="hi" style="display: none;">‡§Ü‡§™‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...</p>
            </div>
        </div>

        <div class="response-container" id="response-container">
            <div class="response-header">
                <h3 data-lang="ml">‡¥û‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥â‡¥§‡µç‡¥§‡¥∞‡¥Ç</h3>
                <h3 data-lang="en" style="display: none;">Our Response</h3>
                <h3 data-lang="hi" style="display: none;">‡§π‡§Æ‡§æ‡§∞‡§æ ‡§ú‡§µ‡§æ‡§¨</h3>
                
                <button class="escalate-btn" id="escalate-btn">
                    <i class="fas fa-user-tie"></i>
                    <span data-lang="ml">‡¥ï‡µÉ‡¥∑‡¥ø ‡¥ì‡¥´‡µÄ‡¥∏‡¥±‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥Ö‡¥Ø‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥ï</span>
                    <span data-lang="en" style="display: none;">Send to Agri Officer</span>
                    <span data-lang="hi" style="display: none;">‡§ï‡•É‡§∑‡§ø ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•ã ‡§≠‡•á‡§ú‡•á‡§Ç</span>
                </button>
            </div>
            <div class="response-content" id="response-content">
                <!-- Response will be inserted here -->
            </div>
        </div>
    </div>

    <section class="features">
        <div class="container">
            <h2 class="section-title" data-lang="ml">‡¥∏‡¥µ‡¥ø‡¥∂‡µá‡¥∑‡¥§‡¥ï‡µæ</h2>
            <h2 class="section-title" data-lang="en" style="display: none;">Features</h2>
            <h2 class="section-title" data-lang="hi" style="display: none;">‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§è‡§Ç</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <h3 data-lang="ml">‡¥∏‡µç‡¥µ‡¥¶‡µá‡¥∂‡¥ø ‡¥≠‡¥æ‡¥∑‡¥æ ‡¥™‡¥ø‡¥®‡µç‡¥§‡µÅ‡¥£</h3>
                    <h3 data-lang="en" style="display: none;">Native Language Support</h3>
                    <h3 data-lang="hi" style="display: none;">‡§Æ‡§æ‡§§‡•É‡§≠‡§æ‡§∑‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®</h3>
                    
                    <p data-lang="ml">‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥∏‡µç‡¥µ‡¥≠‡¥æ‡¥∑‡¥Ø‡¥ø‡µΩ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥®‡µÅ‡¥Ç ‡¥â‡¥§‡µç‡¥§‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥≤‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥®‡µÅ‡¥Ç</p>
                    <p data-lang="en" style="display: none;">Ask questions and get answers in your native language</p>
                    <p data-lang="hi" style="display: none;">‡§Ö‡§™‡§®‡•Ä ‡§Æ‡§æ‡§§‡•É‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç ‡§î‡§∞ ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <h3 data-lang="ml">‡¥∂‡¥¨‡µç‡¥¶ ‡¥á‡µª‡¥™‡µÅ‡¥ü‡µç‡¥ü‡µç</h3>
                    <h3 data-lang="en" style="display: none;">Voice Input</h3>
                    <h3 data-lang="hi" style="display: none;">‡§Ü‡§µ‡§æ‡§ú ‡§á‡§®‡§™‡•Å‡§ü</h3>
                    
                    <p data-lang="ml">‡¥é‡¥¥‡µÅ‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥™‡¥∞‡¥ø‡¥ú‡µç‡¥û‡¥æ‡¥®‡¥Æ‡¥ø‡¥≤‡µç‡¥≤‡¥æ‡¥§‡µç‡¥§‡¥µ‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥Ç ‡¥∂‡¥¨‡µç‡¥¶‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Ç</p>
                    <p data-lang="en" style="display: none;">Ask questions by voice for those who can't read or write</p>
                    <p data-lang="hi" style="display: none;">‡§â‡§®‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡§æ‡§ú ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç ‡§ú‡•ã ‡§™‡§¢‡§º-‡§≤‡§ø‡§ñ ‡§®‡§π‡•Ä‡§Ç ‡§∏‡§ï‡§§‡•á</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <h3 data-lang="ml">‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥µ‡¥¥‡¥ø ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç</h3>
                    <h3 data-lang="en" style="display: none;">Image Analysis</h3>
                    <h3 data-lang="hi" style="display: none;">‡§õ‡§µ‡§ø ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£</h3>
                    
                    <p data-lang="ml">‡¥∞‡µã‡¥ó‡¥Ç ‡¥¨‡¥æ‡¥ß‡¥ø‡¥ö‡µç‡¥ö ‡¥ö‡µÜ‡¥ü‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µç ‡¥∞‡µã‡¥ó‡¥Ç ‡¥§‡¥ø‡¥∞‡¥ø‡¥ö‡µç‡¥ö‡¥±‡¥ø‡¥Ø‡¥æ‡¥Ç</p>
                    <p data-lang="en" style="display: none;">Upload photos of diseased plants to identify the disease</p>
                    <p data-lang="hi" style="display: none;">‡§∞‡•ã‡§ó‡§ó‡•ç‡§∞‡§∏‡•ç‡§§ ‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§ï‡•á ‡§∞‡•ã‡§ó ‡§ï‡•Ä ‡§™‡§π‡§ö‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 data-lang="ml">Digital Krishi Officer</h3>
                    <h3 data-lang="en" style="display: none;">Digital Krishi Officer</h3>
                    <h3 data-lang="hi" style="display: none;">‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡•É‡§∑‡§ø ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä</h3>
                    
                    <p data-lang="ml">‡¥ï‡µº‡¥∑‡¥ï‡¥∞‡µÅ‡¥ü‡µÜ ‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µÅ‡¥Ç ‡¥∏‡¥Æ‡¥ó‡µç‡¥∞‡¥Æ‡¥æ‡¥Ø ‡¥™‡¥∞‡¥ø‡¥π‡¥æ‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥®‡µΩ‡¥ï‡µÅ‡¥®‡µç‡¥® ‡¥í‡¥∞‡µÅ ‡¥°‡¥ø‡¥ú‡¥ø‡¥±‡µç‡¥±‡µΩ ‡¥™‡µç‡¥≤‡¥æ‡¥±‡µç‡¥±‡µç‡¥´‡µã‡¥Ç</p>
                    <p data-lang="en" style="display: none;">A digital platform providing comprehensive solutions to all farmer problems</p>
                    <p data-lang="hi" style="display: none;">‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§≠‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§µ‡•ç‡§Ø‡§æ‡§™‡§ï ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§è‡§ï ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ</p>
                </div>
                <div class="footer-section">
                    <h3 data-lang="ml">‡¥¨‡¥®‡µç‡¥ß‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥ï</h3>
                    <h3 data-lang="en" style="display: none;">Contact Us</h3>
                    <h3 data-lang="hi" style="display: none;">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç</h3>
                    
                    <p data-lang="ml">‡¥ï‡µÉ‡¥∑‡¥ø ‡¥µ‡¥ø‡¥ï‡¥∏‡¥® ‡¥ì‡¥´‡µÄ‡¥∏‡µç</p>
                    <p data-lang="en" style="display: none;">Agriculture Development Office</p>
                    <p data-lang="hi" style="display: none;">‡§ï‡•É‡§∑‡§ø ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø</p>
                    
                    <p data-lang="ml">‡¥§‡¥ø‡¥∞‡µÅ‡¥µ‡§®‡¥®‡µç‡¥§‡¥™‡µÅ‡¥∞‡¥Ç</p>
                    <p data-lang="en" style="display: none;">Thiruvananthapuram</p>
                    <p data-lang="hi" style="display: none;">‡§§‡§ø‡§∞‡•Å‡§µ‡§®‡§Ç‡§§‡§™‡•Å‡§∞‡§Æ</p>
                    
                    <p data-lang="ml">‡¥´‡µã‡µ∫: 0471-1234567</p>
                    <p data-lang="en" style="display: none;">Phone: 0471-1234567</p>
                    <p data-lang="hi" style="display: none;">‡§´‡•ã‡§®: 0471-1234567</p>
                    
                    <p data-lang="ml">‡¥á‡¥Æ‡µÜ‡¥Ø‡¥ø‡µΩ: support@krishiofficer.kerala.gov.in</p>
                    <p data-lang="en" style="display: none;">Email: support@krishiofficer.kerala.gov.in</p>
                    <p data-lang="hi" style="display: none;">‡§à‡§Æ‡•á‡§≤: support@krishiofficer.kerala.gov.in</p>
                </div>
                <div class="footer-section">
                    <h3 data-lang="ml">‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥® ‡¥≤‡¥ø‡¥ô‡µç‡¥ï‡µÅ‡¥ï‡µæ</h3>
                    <h3 data-lang="en" style="display: none;">Important Links</h3>
                    <h3 data-lang="hi" style="display: none;">‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§≤‡§ø‡§Ç‡§ï</h3>
                    
                    <p><a href="#" style="color: white;" data-lang="ml">‡¥ï‡µá‡¥∞‡¥≥ ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥µ‡¥ø‡¥≠‡¥æ‡¥ó‡¥Ç</a><a href="#" style="color: white; display: none;" data-lang="en">Kerala Agriculture Department</a><a href="#" style="color: white; display: none;" data-lang="hi">‡§ï‡•á‡§∞‡§≤ ‡§ï‡•É‡§∑‡§ø ‡§µ‡§ø‡§≠‡§æ‡§ó</a></p>
                    <p><a href="#" style="color: white;" data-lang="ml">‡¥ï‡µº‡¥∑‡¥ï ‡¥∏‡¥π‡¥æ‡¥Ø ‡¥™‡¥¶‡µç‡¥ß‡¥§‡¥ø‡¥ï‡µæ</a><a href="#" style="color: white; display: none;" data-lang="en">Farmer Assistance Schemes</a><a href="#" style="color: white; display: none;" data-lang="hi">‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</a></p>
                    <p><a href="#" style="color: white;" data-lang="ml">‡¥µ‡¥ø‡¥™‡¥£‡¥® ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§‡¥ï‡µæ</a><a href="#" style="color: white; display: none;" data-lang="en">Marketing Opportunities</a><a href="#" style="color: white; display: none;" data-lang="hi">‡§µ‡§ø‡§™‡§£‡§® ‡§Ö‡§µ‡§∏‡§∞</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-lang="ml">&copy; 2025 Digital Krishi Officer. ‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥Ö‡¥µ‡¥ï‡¥æ‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥∏‡¥Ç‡¥∞‡¥ï‡µç‡¥∑‡¥ø‡¥ö‡µç‡¥ö‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ.</p>
                <p data-lang="en" style="display: none;">&copy; 2025 Digital Krishi Officer. All rights reserved.</p>
                <p data-lang="hi" style="display: none;">&copy; 2025 ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡•É‡§∑‡§ø ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä‡•§ ‡§∏‡§∞‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§</p>
            </div>
        </div>
    </footer>

    <script>
        // Your existing JavaScript code remains exactly the same
        document.addEventListener('DOMContentLoaded', function() {
    // --- STATE MANAGEMENT ---
    let currentLanguage = 'ml'; // Default language is Malayalam

    // --- ELEMENT SELECTORS ---
    const languageSelector = document.getElementById('language-selector');
    const allLanguageElements = document.querySelectorAll('[data-lang]');
    const tabs = document.querySelectorAll('.tab');
    const textInputContainer = document.getElementById('text-input');
    const imageInputContainer = document.getElementById('image-input');
    const imageUploadArea = document.getElementById('image-upload-area');
    const imageFileInput = document.getElementById('image-file');
    const voiceBtn = document.getElementById('voice-to-text');
    const voiceStatusElements = document.querySelectorAll('.voice-status'); // Correctly select all status elements
    const textQueryTextarea = document.querySelector(`#text-input textarea[data-lang="ml"]`);
    const submitBtn = document.getElementById('submit-query');
    const loader = document.getElementById('loader');
    const responseContainer = document.getElementById('response-container');
    const responseContent = document.getElementById('response-content');
    const escalateBtn = document.getElementById('escalate-btn');

    // --- LANGUAGE SWITCHING LOGIC ---
    function setLanguage(newLanguage) {
        allLanguageElements.forEach(el => {
            if (el.dataset.lang === newLanguage) {
                // Use 'block' for block-level elements and 'inline' for others if needed, '' is safer
                el.style.display = ''; 
            } else {
                el.style.display = 'none';
            }
        });
        currentLanguage = newLanguage;
        updateVoiceRecognitionLanguage(newLanguage);
    }

    languageSelector.addEventListener('change', function() {
        setLanguage(this.value);
    });

    // --- TAB SWITCHING LOGIC ---
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            // Only handle clicks on tabs for the current language
            if (tab.getAttribute('data-lang') !== currentLanguage) return;

            // Deactivate all tabs for the current language
            document.querySelectorAll(`.tab[data-lang="${currentLanguage}"]`).forEach(t => t.classList.remove('active'));
            
            // Activate the clicked tab
            tab.classList.add('active');

            const tabType = tab.dataset.tab;

            if (tabType === 'image') {
                textInputContainer.style.display = 'none';
                imageInputContainer.style.display = 'block';
            } else { // Covers 'text' and 'voice'
                textInputContainer.style.display = 'block';
                imageInputContainer.style.display = 'none';
            }
        });
    });

    // --- IMAGE UPLOAD LOGIC ---
    imageUploadArea.addEventListener('click', () => imageFileInput.click());

    imageFileInput.addEventListener('change', function() {
        if (this.files && this.files[0]) {
            const fileName = this.files[0].name;
            const pElement = imageUploadArea.querySelector(`p[data-lang="${currentLanguage}"]`);
            if (pElement) {
                pElement.textContent = `${currentLanguage === 'ml' ? '‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µÅ: ' : currentLanguage === 'hi' ? '‡§ö‡§Ø‡§®‡§ø‡§§: ' : 'Selected: '}${fileName}`;
            }
        }
    });

    // --- VOICE INPUT (SPEECH RECOGNITION) LOGIC ---
    let recognition;
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (SpeechRecognition) {
        recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;

        recognition.onstart = () => {
            const statusText = currentLanguage === 'ml' ? '‡¥ï‡µá‡µæ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ... ‡¥á‡¥™‡µç‡¥™‡µã‡µæ ‡¥™‡¥±‡¥Ø‡µÅ‡¥ï' :
                               currentLanguage === 'hi' ? '‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å... ‡§Ö‡§¨ ‡§¨‡•ã‡§≤‡•á‡§Ç' :
                               'Listening... Speak now';
            voiceStatusElements.forEach(el => {
                if(el.dataset.lang === currentLanguage) el.textContent = statusText;
            });
            voiceBtn.innerHTML = '<i class="fas fa-stop-circle"></i>';
            voiceBtn.style.backgroundColor = '#f44336';
        };

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            const activeTextarea = document.querySelector(`#text-input textarea[data-lang="${currentLanguage}"]`);
            if(activeTextarea) activeTextarea.value = transcript;
        };

        recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            const statusText = currentLanguage === 'ml' ? '‡¥í‡¥∞‡µÅ ‡¥™‡¥ø‡¥∂‡¥ï‡µç ‡¥∏‡¥Ç‡¥≠‡¥µ‡¥ø‡¥ö‡µç‡¥ö‡µÅ, ‡¥µ‡µÄ‡¥£‡µç‡¥ü‡µÅ‡¥Ç ‡¥∂‡µç‡¥∞‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï' :
                               currentLanguage === 'hi' ? '‡§è‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç' :
                               'An error occurred, please try again';
            voiceStatusElements.forEach(el => {
                if(el.dataset.lang === currentLanguage) el.textContent = statusText;
            });
        };

        recognition.onend = () => {
            const statusText = currentLanguage === 'ml' ? '‡¥Æ‡µà‡¥ï‡µç‡¥ï‡µç ‡¥ï‡µç‡¥≤‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µç ‡¥∂‡¥¨‡µç‡¥¶‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Ç' :
                               currentLanguage === 'hi' ? '‡§Ü‡§µ‡§æ‡§ú ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç' :
                               'Click mic to ask question by voice';
            voiceStatusElements.forEach(el => {
                 if(el.dataset.lang === currentLanguage) el.textContent = statusText;
            });
            voiceBtn.innerHTML = '<i class="fas fa-microphone"></i>';
            voiceBtn.style.backgroundColor = ''; // Revert to default color
        };
    } else {
        voiceBtn.disabled = true;
        const statusText = currentLanguage === 'ml' ? '‡¥à ‡¥¨‡µç‡¥∞‡µó‡¥∏‡¥±‡¥ø‡µΩ ‡¥à ‡¥∏‡µó‡¥ï‡¥∞‡µç‡¥Ø‡¥Ç ‡¥≤‡¥≠‡µç‡¥Ø‡¥Æ‡¥≤‡µç‡¥≤' :
                           currentLanguage === 'hi' ? '‡§Ø‡§π ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§á‡§∏ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à' :
                           'Feature not supported in this browser';
        voiceStatusElements.forEach(el => {
             if(el.dataset.lang === currentLanguage) el.textContent = statusText;
        });
    }

    function updateVoiceRecognitionLanguage(lang) {
        if (recognition) {
            const langCode = { ml: 'ml-IN', en: 'en-IN', hi: 'hi-IN' };
            recognition.lang = langCode[lang] || 'en-IN';
        }
    }
    
    voiceBtn.addEventListener('click', () => {
        if (recognition) {
            try {
                recognition.start();
            } catch(e) {
                console.error("Could not start recognition:", e);
            }
        }
    });

    // --- FORM SUBMISSION (API CALL) LOGIC ---
    submitBtn.addEventListener('click', async () => {
        let query = '';
        const activeTab = document.querySelector('.tab.active[data-lang="' + currentLanguage + '"]').dataset.tab;
        
        if (activeTab === 'image') {
            const imageCaptionArea = document.querySelector(`#image-input textarea[data-lang="${currentLanguage}"]`);
            query = imageCaptionArea.value.trim();
            // In a real app, you would also handle the imageFileInput.files[0] here
            if (!query && !imageFileInput.files[0]) {
                 alert(currentLanguage === 'ml' ? '‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥í‡¥∞‡µÅ ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥Æ‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡¥≤‡µÅ‡¥Ç ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥µ‡¥ø‡¥µ‡¥∞‡¥£‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï' :
                       currentLanguage === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§è‡§ï ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç' :
                       'Please upload an image or provide a description');
                 return;
            }
        } else {
            const activeTextarea = document.querySelector(`#text-input textarea[data-lang="${currentLanguage}"]`);
            query = activeTextarea.value.trim();
        }

        if (!query) {
            alert(currentLanguage === 'ml' ? '‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥í‡¥∞‡µÅ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç ‡¥é‡¥¥‡µÅ‡¥§‡µÅ‡¥ï' :
                  currentLanguage === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡•ã‡§à ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç' :
                  'Please type a question');
            return;
        }

        const cropType = document.getElementById('crop-type').value;
        const district = document.getElementById('district').value;
        const season = document.getElementById('season').value;

        loader.style.display = 'block';
        responseContainer.style.display = 'none';

        try {
            // This is the REAL API Call to your local server
            const apiResponse = await fetch('http://localhost:3000/api/get-advice', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    query: query,
                    crop: cropType,
                    district: district,
                    season: season,
                    language: currentLanguage
                }),
            });
            
            if (!apiResponse.ok) {
                throw new Error(`Server error: ${apiResponse.statusText}`);
            }

            const data = await apiResponse.json();
            responseContent.innerHTML = data.answer;

        } catch (error) {
            console.error('Fetch Error:', error);
            const errorMsg = currentLanguage === 'ml' ? '<p>‡¥ï‡µç‡¥∑‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡¥£‡¥Ç, ‡¥í‡¥∞‡µÅ ‡¥™‡¥ø‡¥∂‡¥ï‡µç ‡¥∏‡¥Ç‡¥≠‡¥µ‡¥ø‡¥ö‡µç‡¥ö‡µÅ. ‡¥∏‡µÜ‡µº‡¥µ‡¥±‡µÅ‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥¨‡¥®‡µç‡¥ß‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥ï‡¥¥‡¥ø‡¥û‡µç‡¥û‡¥ø‡¥≤‡µç‡¥≤.</p>' :
                             currentLanguage === 'hi' ? '<p>‡§ï‡•ç‡§∑‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç, ‡§ï‡•ã‡§à ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§æ‡•§</p>' :
                             '<p>Sorry, something went wrong. Could not connect to the server.</p>';
            responseContent.innerHTML = errorMsg;
        } finally {
            loader.style.display = 'none';
            responseContainer.style.display = 'block';
        }
    });

    // --- ESCALATE BUTTON LOGIC ---
    escalateBtn.addEventListener('click', () => {
        // In a real app, this would trigger another API call to save the query to a database.
        const message = currentLanguage === 'ml' ? '‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥ì‡¥´‡µÄ‡¥∏‡µº‡¥ï‡µç‡¥ï‡µç ‡¥Ö‡¥Ø‡¥ö‡µç‡¥ö‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ. 24 ‡¥Æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡µÇ‡¥±‡¥ø‡¥®‡µÅ‡¥≥‡µç‡¥≥‡¥ø‡µΩ ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥Æ‡¥±‡µÅ‡¥™‡¥ü‡¥ø ‡¥≤‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç.' :
                      currentLanguage === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ï‡•É‡§∑‡§ø ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•ã ‡§≠‡•á‡§ú ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™‡§ï‡•ã 24 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ ‡§ú‡§µ‡§æ‡§¨ ‡§Æ‡§ø‡§≤ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§' :
                      'Your question has been sent to the Agriculture Officer. You will receive a response within 24 hours.';
        alert(message);
    });
    
    // --- INITIALIZATION ---
    setLanguage('ml'); // Set default language on page load
    updateVoiceRecognitionLanguage('ml'); // Set default voice language
});

    </script>
</body>
</html>